---
title: "Gait cycle selection in treadmill running data: Does it matter?"
author:
  - name: Aaron S. Fox
    affiliation: Centre for Sport Research
    footnote: 1
  - name: Meghan F. Keast
    affiliation: Centre for Sport Research
  - name: John Warmenhoven
    affiliation: UNSW
  - name: Jason Bonacci
    affiliation: Centre for Sport Research
address:
  - code: Centre for Sport Research
    address: Centre for Sport Research, School of Exercise and Nutrition Sciences, Deakin University, Geelong, Australia
  - code: UNSW
    address: School of Engineering and Information Technology, University of New South Wales, Canberra, Australia
footnote:
  - code: 1
    text: "Corresponding Author"
abstract: |
  Insert abstract...

journal: ar$\chi$iv
date: "Version 1.0:`r Sys.Date()`"
bibliography: mybibfile.bib
#linenumbers: true
#numbersections: true
csl: elsevier-harvard.csl
output: rticles::elsevier_article
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = FALSE)

#Multiple knit options - in YAML
# knit: (function(inputFile, encoding) {
#   rmarkdown::render(inputFile, encoding = encoding,
#   output_format = "all") })

```
                                                  
# Introduction


- Variety of methods for selecting gait cycles from treadmill-based studies of running...


- Common process within experimental studies is to collect a certain number of gait cycles and use the average of this biomechanical data to compute a representative mean for the individual...


- There is a need to understand the effect of gait cycle number on biomechanical outcome variables from a time cost perspective. We can somewhat easily collect a significant number of gait cycles within a laboratory environment in a treadmill-based test. Having participants settle into a steady state through continuous running over X time period is in fact recommended (?). However, there are potential time savings to be made within analysis protocols should we need to process fewer gait cycles (i.e. time within IK-like processes, time with data cleaning etc.). On the flip side, should only a small number of gait cycles result in 'unstable' biomechanical variables that aren't necessarily representative of an individuals running biomechanics, this would suggest a need to collect and process more gait cycles in calculating a representative mean for the individual... 



Oliveira and Pirscoveanu[@Oliveira2021] recently examined the typical number of gait cycles using in running biomechanics studies. On average, studies used 12 cycles per runner to describe running biomechanics, while Very few (5 out of 56 studies) used more than 10 cycles [@Oliveira2021]. 


Oliveira and Pirscoveanu[@Oliveira2021] subsequently performed a study investigating the impact of sample size and the number of gait cycles used on biomechanical outcomes

***TODO: outline major findings*** 

The findings from their study are, however, specific to overground running and the specific set of variables analysed (i.e. foot contact time, loading rate, peak vertical force, peak braking force, running speed and foot contact angle). Treadmill-based studies of running are common across the biomechanical literature ***ADD REFS***. It is plausible that treadmill running may incur a different pattern of 'stability' with respect to the number of gait cycles needed for analyses, resulting in variable recommendations to those presented by Oliveira and Pirscoveanu[@Oliveira2021]. Further, Oliveira and Pirscoveanu[@Oliveira2021] did not examine lower limb kinematic variables commonly used in gait biomechanics studies. These kinematic variables are presented as both 'zero-dimensional' (0D; e.g. peak values) and 'one-dimensional' (1D; e.g. time-normalised kinematic waveform) variables across biomechanical studies ***ADD REFS***. Additional analyses of these common kinematic variables in both their 0D and 1D forms may, again, yield additional information with respect to the number of gait cycles required in biomechanical research. 

Another limitation to consider is the analysis focused on statistical significance...not bounds around error measurement?


We sought to understand the impact of the number of gait cycles selected, along with where these are selected from during a continuous bout of treadmill running, on biomechanical data and ... how this may influence conclusions...

First, we used sequential analysis to understand the stability of biomechanical variables as gait cycle number is increased.

Second, we examined how varying the number of gait cycle samples impacted the representative mean compared to the entire bout of continuous treadmill running.

Third, we examined whether sampling gait cycles of varying number from different sections of an individuals bout of continuous treadmill running could influence biomechanical outcome variables.

Fourth, we examined whether varying samples of gait cycles could influence our capacity to detect biomechanical differences between conditions — specifically, between running at two different speeds.


# Methods

*TODO: THIS PAPER WILL WORK BETTER WITH METHODS CONNECTED TO RESULTS, LIKE THE SUPER SHOT PAPER...*


We used the public dataset of treadmill running biomechanics provided by Fukuchi et al.[@Fukuchi2017]. The specific details of this dataset can be found in the associated paper [@Fukuchi2017]. Briefly, this dataset contains lower-extremity kinematics and kinetics of 28 regular runners (27 male, 1 female; age = 34.8 ± 6.7 years; height = 176.0 ± 6.8 cm; mass = 69.6 ± 7.7 kg; running experience = 8.5 ± 7.0 years; running pace = 4.1 ± 0.4 min/km) [@Fukuchi2017]. Running kinematics were collected using a 12-camera 3D motion capture system (Raptor-4, Motion Analysis, Santa Rosa, CA, United States) and ground reaction force (GRF) data via an instrumented dual-belt treamill (FIT, Bertec, Columbus, OH, United States) [@Fukuchi2017]. Participants ran on the treadmill at three designated speeds (2.5m·s^-1^, 3.5m·s^-1^ and 4.5m·s^-1^), during which a three-minute accommodation period was provided followed by a 30-second data collection period [@Fukuchi2017]. 


- Within our work, we only used data collected from the 2.5m·s^-1^ and 4.5m·s^-1^ trials. [maybe? - probably not...]

We processed the experimental data from Fukuchi et al.[@Fukuchi2017] using OpenSim 4.0 [@Delp2007]. Segment geometry of the generic musculoskeletal model of the pelvis and lower limb provided by Lai et al.[@Lai2017] were scaled for each participant using their static calibration trial, which was also used as a reference for adjusting marker positions on the model. Lower limb joint angles were calculated using filtered (10Hz low-pass 4^th^ order Butterworth) marker trajectory data within inverse kinematics analysis. GRF data were also filtered using the same cut-off frequency and filter. The filtering procedures reflected those originally performed by Fukuchi et al.[@Fukuchi2017]. Foot strike and toe-off events were determined when the vertical GRF crossed a 20N threshold, in line with the original work on this dataset [@Fukuchi2017].



- 0D and 1D variables...outline how these are calculated and what they are...
- Data from right limb

# How many gait cycles are required to generate 'stable' kinematic data?

We used sequential analysis to determine the minimum number of gait cycles required to reach a 'stable' representative mean within the number of gait cycles extracted from the 30-second period of treadmill running. Sequential analysis was individually applied across the different running speeds and kinematic variables (both 0D and 1D variants) examined. We used multiple bandwidths to determine varying degrees of 'stability'. This included ± 0.25 of one standard deviation from the target mean, in line with existing studies applying sequential analysis to biomechanical data ***ADD REFS***; but expanded this to ± 0.50, 0.75 and 1.00 of one standard deviation from the target mean. This additional analysis can provide various thresholds for which researchers can choose to apply to their own studies. For 0D variables, the sequential discrete data points across all gait cycles from each participant were averaged to create the target stability, from which the various standard deviation bandwidths were applied to. To be considered 'stable,' a 0D variable had to fall and remain within the bandwidth for the rest of the gait cycles. For 1D variables, the same technique was applied to each time-normalised point along the continuous kinematic waveform. To be considered 'stable,' a all points along the 1D kinematic waveform had to fall and remain within the bandwidth for the rest of the gait cycles. The number of gait cycles where stability was reached across the various running speeds, kinematic variables and stability thresholds were extracted and descriptive statistics (i.e. mean, median, inter-quartile ranges, total range) were calculated. The proportion of participants reaching stability at each gait cycle number was also calculated.

*TODO: add results for this section here...*

- Sequential analysis revealed...
- Stability reached earlier with 0D vs. 1D variables (see boxplot)
  -- Also more steadier build up of participants who reached stability from 0D to 1D (i.e. the lower bound for the number of cycles required for 1D variables was higher -- see line plot)
- Stability reached with fewer gait cycles with an altered stability boundary (i.e. 0.25 SD to 1SD)
- No. of gait cycles to reach stability seemed relatively independent of variable type (consistent number of gait cycles required) irrespective of the lower limb variable considered
- Wide ranges for reaching stability across individuals (e.g. some required very few, < 10; others required a large number of gait cycles > 30) -- this was dependent on the threshold though
- Seemed to be a slight shift for the proportion of participants reaching stability as speed increased (see line plots) -- slight shift to the right of the curves for the number of participants reaching stability as speed increased


# How does the number of gait cycles used impact the representative kinematic mean?



*TODO: add methods...*

...


*TODO: Results here...*

- The absolute error of the representative kinematic mean (compared to the mean from all cycles) progressively reduced as the number of gait cycles increased; but the errors were still quite small
  -- e.g. 0D at 2.5 metres per second were all less than 1 degree
- Errors for 0D did however become slightly larger with lower gait cycle numbers at the highest running speed, and typically needed to use a high number (e.g. 30) gait cycles to reach similar levels of error compared to the 'ground truth' during the 4.5 metres per second

- The peak absolute errors from the 1D comparison showed a similar trend of reducing with a greater number of gait cycles, but errors were similarly small
- Wasn't as an obvious jump with higher running speed in the peak absolute errors for 1D comparisons



# How does the sampling location within a treadmill bout impact the representative kinematic mean?

*TODO: add methods...*

...


*TODO: add results...*

- Increasing the number of gait cycles didn't really change the errors between the sampling means
- Errors between sampling sections were relatively small for 2.5 and 3.5 metres per second, but increased a little for 4.5 metres per second. 
- Effectively at lower speeds, where you sample your gait cycles from in a period of treadmill running didn't have a dramatic effect on the kinematic mean at 2.5 and 3.5 metres per second (i.e. with 1 degree of one another), but this slightly increased at the highest running speed
- Practically what this means is you can expect a little bit of error depending on where the data is sampled from, but not a whole lot; and this isn't really modulated from a number of gait cycles perspective



# Results






``` {r cars}

#Test some r code
summary(cars)

```




# Discussion

...

***KEY POINT = higher speeds seem to necessitate a greater number of gait cycles to reach stability and be representative of the entire running bout***

***KEY POINT = despite seeing improvements in the 'error' of a representative kinematic mean with a larger number of gait cycles, the differences were quite small (e.g. 1-2 degrees at a maximum). This may be important to detect small differences in running technique, but the magnitude of some of these errors perhaps need to be considered against the added data collection, management, and processing times associated with including more gait cycles. For example, your representative mean for knee flexion may improve by 0.5 degrees when going from 5 to 30 gait cycles --- but how much extra time does this take, data storage too? Effectively a small number of cycles sampled from a longer continuous treadmill bout presents a relatively similar kinematic mean compared to a mean calculated from the entire bout of running.***

***KEY POINT = once you've decided how many gait cycles you're using, where do you take the data from? Our results suggest it probably doesn't matter too much, and this opinion doesn't really change if you're using more or less gait cycles to create the mean. If you are taking a sub-sample from the treadmill bout, you can expect this to have a potential effect within the realm of < 1 degree at lower speeds -- but slightly higher at faster speeds. Practically what this means is if you see a very small difference between conditions, groups etc., this could simply be driven by the sampling from the treadmill bout (e.g. if you sampled from a different portion, could the results be different?). Note that we sampled consecutiv gait cycles for this analysis.***

Stability analysis -- reveals for entire 1D spectrum to be 'stable' in accordance with existing definitions (i.e. within 0.25 SD), 30 gait cycles may be necessary for capture; whereas we saw a similar values for 0D variables to Oliveira study with around 20 required for these variables. Unsurprisingly, relaxing the bounds as to what is considered 'stable' (i.e. from 0.25SD up to 1SD) resulted in less gait cycles being required for a stable pattern

There was no noticeable effect across different kinematic variables for the number of cycles to reach stability; there was a potential small increase in the number of cycles required for achieving 'stability' as running speed increased. It took more gait cycles for stability to be reached across the majority of participants with higher running speeds -- consideration for research at higher speeds

Our fourth question perhaps presents the most practically meaningful analysis of this work, in understanding how the number and selection of gait cycles could impact the conclusions of a comparative study using a paired design...

